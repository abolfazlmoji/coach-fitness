const { Client, LocalAuth } = require('whatsapp-web.js');
const qrcode = require('qrcode-terminal');

const client = new Client({
    authStrategy: new LocalAuth()
});

client.on('qr', qr => {
    qrcode.generate(qr, {small: true});
});

client.on('ready', () => {
    console.log('Ø±Ø¨Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª âœ…');
});

let userSteps = {};

client.on('message', async msg => {
    const chatId = msg.from;

    if (!userSteps[chatId]) {
        userSteps[chatId] = { step: 1, data: {} };
        await msg.reply("Ø³Ù„Ø§Ù…! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ ğŸ˜Š\nØ¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ú†Ù†Ø¯ Ø³ÙˆØ§Ù„ Ù…ÛŒâ€ŒÙ¾Ø±Ø³Ù….");
        await msg.reply("Û±) Ø³Ù†Øª Ú†Ù†Ø¯ Ø³Ø§Ù„Ù‡ Ø§Ø³ØªØŸ");
        return;
    }

    let step = userSteps[chatId].step;

    if (step === 1) {
        userSteps[chatId].data.age = msg.body;
        userSteps[chatId].step++;
        msg.reply("Û²) ÙˆØ²Ù†Øª Ú†Ù†Ø¯ Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… Ø§Ø³ØªØŸ");
    } else if (step === 2) {
        userSteps[chatId].data.weight = msg.body;
        userSteps[chatId].step++;
        msg.reply("Û³) Ù‚Ø¯Øª Ú†Ù†Ø¯ Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ± Ø§Ø³ØªØŸ");
    } else if (step === 3) {
        userSteps[chatId].data.height = msg.body;
        userSteps[chatId].step++;
        msg.reply("Û´) Ø¢ÛŒØ§ Ø¢Ø³ÛŒØ¨ ÛŒØ§ Ù†Ø§Ù‡Ù†Ø¬Ø§Ø±ÛŒ Ø¬Ø³Ù…ÛŒ Ø¯Ø§Ø±ÛŒØŸ (Ù†Ø¯Ø§Ø±Ù…/ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡)");
    } else if (step === 4) {
        userSteps[chatId].data.injury = msg.body;
        userSteps[chatId].step++;
        msg.reply("Ûµ) Ø§ÛŒÙ† Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ù‡Ø³Øª Ú©Ù‡ Ø§Ø² Ù…Ù† Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ ÛŒØ§ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú†Ù†Ø¯Ù…Ù‡ØŸ");
    } else if (step === 5) {
        userSteps[chatId].data.programHistory = msg.body;
        userSteps[chatId].step++;
        msg.reply("âœ… Ù…Ù…Ù†ÙˆÙ†! Ø­Ø§Ù„Ø§ Ù„Ø·ÙØ§Ù‹ Ù‡Ø²ÛŒÙ†Ù‡ Ø±Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ù† Ùˆ Ø±Ø³ÛŒØ¯ Ø±Ùˆ Ø¨ÙØ±Ø³Øª.");
    } else {
        msg.reply("Ø§Ø·Ù„Ø§Ø¹Ø§ØªØª Ø«Ø¨Øª Ø´Ø¯ØŒ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ù…ÛŒØ´Ù‡.");
    }
});

client.initialize();
